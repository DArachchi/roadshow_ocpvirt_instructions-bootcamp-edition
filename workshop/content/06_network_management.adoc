:scrollbar:
:toc2:

= Network Management Lab

:numbered:

== Introduction to Network Management

By default, all virtual machines are attached to OpenShift Pod networking, enabling access from any other workload on the OpenShift cluster. This includes other VMs and any OpenShift native applications.

// WKTBD: Maybe add some NetworkPolicy (there is a web console wizard available now in 4.13).

In this lab, you connect a VM to a physical network so that it is accessible outside the Red Hat^(R)^ OpenShift^(R)^ Container Platform environment. Your OpenShift environment has alreay been configured with a Linux Bridge on each worker node that your virtual machines can connect to thus allowing for easy connectivy with/from outside network resources.

.Goals
* Create a network attachment definition

== Create Network Attachment Definition

In order to use the Linux Bridge with your VM you need to create a *Network Attachment Definition* and then associate that definition with your VM.

. Navigate to *Networking* -> *Network Attachment Definitions* and click *Create network attachment definition*:
+
image::images/Networking/01_NAD_Dashboard.png[]
+
[IMPORTANT]
====
Select project `vmexamples`.
====

. Complete the form for the `vmexamples` project as follows, then click *Create network attachment definition*:
* *Name*: `flatnetwork`
* *Network Type*: `CNV Linux Bridge`
* *Bridge Name*: `br-flat`
+
image::images/Networking/02_NAD_Create.png[]
+
[NOTE]
As you can observe in this form, it is possible to configure VLAN networks.

. Examine the details of the network attachment definition:
+
image::images/Networking/03_NAD_Created.png[]

. Navigate to *Virtualization* -> *VirtualMachines*, select the `fedora02` VM. Click *Configuration* tab and then click the *Network Interfaces* subtab:
+
image::images/Networking/04_VM_Network_Tab.png[]

. Click *Add Network Interface*, complete the form as shown, then click *Save*:
+
image::images/Networking/05_VM_Network_Attach.png[]

. Use the *Actions* menu to restart the VM. After is rebooted, navigate to *Console* tab:
+
image::images/Networking/06_VM_Network_Console.png[]
+
The `eth1` interface obtains an IP address from the flat network (192.168.3.x/24). That network has a DHCP server providing IPs to that network.
////
// WKTBD: How do we show this if we don't have the console tab in the bookbag?
////
. Using the available console in the right part, you can confirm you have direct access to the VM through a flat network
+
[%nowrap]
----
[~] $ curl 192.168.3.118:22                           
----
+
[NOTE]
Replace the IP which the IP assigned to the node.
+
.Sample Output
+
[%nowrap]
----
SSH-2.0-OpenSSH_8.7     
----
////

== Summary

In this lab, you connected a VM to a physical network using a Linux Bridge so that it is accessible outside the cluster of the Red Hat OpenShift Container Platform.
